<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶ï‡ßç‡¶∞‡¶ø‡¶ï‡ßá‡¶ü ‡¶™‡ßç‡¶≤‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶®‡¶ø‡¶≤‡¶æ‡¶Æ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #1e5128 0%, #2d6a4f 50%, #40916c 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .bank-panel { background: white; padding: 25px; border-radius: 15px; margin-bottom: 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); text-align: center; }
        .bank-panel h2 { color: #1e5128; margin-bottom: 20px; font-size: 1.8em; }
        .bank-input-group { display: flex; gap: 10px; justify-content: center; align-items: center; margin-bottom: 15px; flex-wrap: wrap; }
        .bank-input-group input { padding: 10px; border: 2px solid #d1d5db; border-radius: 5px; font-size: 1em; width: 200px; text-align: center; }
        .bank-input-group button { background: #059669; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; }
        .bank-actions { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .bank-actions button { padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: bold; }
        .btn-result-sheet { background: #0284c7; color: white; }
        .btn-reset-data { background: #dc2626; color: white; }
        .category-tabs { display: flex; gap: 15px; margin-bottom: 30px; justify-content: center; flex-wrap: wrap; }
        .category-tab { background: white; padding: 15px 30px; border-radius: 10px; cursor: pointer; font-size: 1.2em; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .category-tab.active { background: linear-gradient(135deg, #ea580c 0%, #dc2626 100%); color: white; }
        .category-tab.a { border: 3px solid #dc2626; }
        .category-tab.b { border: 3px solid #ea580c; }
        .category-tab.c { border: 3px solid #f59e0b; }
        .category-tab.icon { border: 3px solid #9333ea; }
        .player-screen { background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); text-align: center; min-height: 600px; display: flex; flex-direction: column; justify-content: center; }
        .player-image-large { width: 300px; height: 300px; border-radius: 50%; object-fit: cover; margin: 0 auto 30px; border: 8px solid #ea580c; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .player-name-large { font-size: 3em; font-weight: bold; color: #1f2937; margin-bottom: 20px; }
        .player-category-badge { display: inline-block; padding: 10px 30px; border-radius: 25px; font-size: 1.5em; font-weight: bold; margin-bottom: 20px; }
        .badge-a { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); color: white; }
        .badge-b { background: linear-gradient(135deg, #ea580c 0%, #c2410c 100%); color: white; }
        .badge-c { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; }
        .badge-icon { background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%); color: white; }
        .price-info-box { display: flex; flex-direction: column; align-items: center; margin-bottom: 30px; }
        .base-price-display { font-size: 1.8em; color: #1e5128; font-weight: bold; margin-bottom: 10px; }
        .sold-price-display { font-size: 2.5em; color: #dc2626; font-weight: bold; }
        .team-selector { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
        .team-btn { background: white; color: #1f2937; padding: 12px 25px; border: 3px solid #d1d5db; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: bold; }
        .team-btn.selected { background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%); color: white; border-color: #9333ea; }
        .navigation-buttons { display: flex; gap: 20px; justify-content: center; margin-top: 30px; }
        .nav-btn { background: #ea580c; color: white; padding: 15px 40px; border: none; border-radius: 10px; cursor: pointer; font-size: 1.2em; font-weight: bold; }
        .nav-btn:disabled { background: #9ca3af; cursor: not-allowed; }
        .player-counter { font-size: 1.3em; color: #6b7280; margin-top: 20px; }
        .no-players { font-size: 1.5em; color: #6b7280; padding: 100px 20px; }
        .result-sheet-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .result-sheet-content { background: white; padding: 30px; border-radius: 15px; max-width: 90%; max-height: 90%; overflow-y: auto; }
        .result-sheet-content h2 { color: #1e5128; margin-bottom: 20px; text-align: center; }
        .result-sheet-content table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        .result-sheet-content th, .result-sheet-content td { color: #1f2937; border: 1px solid #ddd; padding: 10px; text-align: left; }
        .result-sheet-content th { background-color: #f3f4f6; }
        .view-tabs { display: flex; gap: 15px; justify-content: center; margin-bottom: 20px; }
        .view-tab { background: white; color: #1f2937; padding: 12px 30px; border: 3px solid #d1d5db; border-radius: 8px; cursor: pointer; font-size: 1.1em; font-weight: bold; }
        .view-tab.active-view { background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%); color: white; }
        .team-tabs { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap; }
        .team-tab { background: white; color: #1f2937; padding: 12px 20px; border: 3px solid #d1d5db; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .team-tab.active-team { background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%); color: white; }
        .team-players-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .player-card { background: white; border: 3px solid #9333ea; border-radius: 10px; padding: 15px; text-align: center; }
        .player-card-image { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin: 0 auto 10px; border: 4px solid #9333ea; }
        .player-card-name { font-size: 1.1em; font-weight: bold; color: #1f2937; margin-bottom: 8px; }
        .player-card-price { font-size: 1.2em; font-weight: bold; color: #059669; }
        .no-team-players { text-align: center; color: #6b7280; font-size: 1.2em; padding: 40px; }
        .close-btn { background: #dc2626; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; display: block; margin: 0 auto; }
        .result-actions { display: flex; gap: 15px; justify-content: center; margin-bottom: 20px; }
        .btn-download-pdf { background: #059669; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div class="bank-panel">
            <h2>üíº Civil Construction & Safety Trade<br>üèóÔ∏è Building Construction & Maintenance Trade</h2>
            <div class="bank-input-group">
                <input type="number" id="auctionPriceInput" placeholder="‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶§ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
                <button onclick="setAuctionPrice()">‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
            <div class="bank-actions">
                <button class="btn-result-sheet" onclick="showResultSheet()">‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶∂‡ßÄ‡¶ü ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
                <button class="btn-reset-data" onclick="resetData()">‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶® (‡¶∏‡¶ï‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ)</button>
            </div>
        </div>
        <div class="category-tabs">
            <div class="category-tab a active" onclick="changeCategory('A')">üåü ‡¶è ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</div>
            <div class="category-tab b" onclick="changeCategory('B')">‚≠ê ‡¶¨‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</div>
            <div class="category-tab c" onclick="changeCategory('C')">‚ú® ‡¶∏‡¶ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</div>
            <div class="category-tab icon" onclick="changeCategory('ICON')">üëë ‡¶Ü‡¶á‡¶ï‡¶® ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</div>
        </div>
        <div class="player-screen" id="playerScreen"></div>
        <div class="result-sheet-overlay" id="resultSheetOverlay" onclick="hideResultSheet(event)">
            <div class="result-sheet-content" onclick="event.stopPropagation()">
                <h2>üíº Civil Construction & Safety Trade<br>üèóÔ∏è Building Construction & Maintenance Trade</h2>
                <div class="view-tabs">
                    <div class="view-tab active-view" onclick="changeView('all')">‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü</div>
                    <div class="view-tab" onclick="changeView('team')">‡¶ü‡¶ø‡¶Æ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ</div>
                </div>
                <div id="teamTabsContainer" style="display: none;">
                    <div class="team-tabs">
                        <div class="team-tab active-team" onclick="showTeamPlayers('Dumuria Kings')">Dumuria Kings</div>
                        <div class="team-tab" onclick="showTeamPlayers('Dumuria Strikers')">Dumuria Strikers</div>
                        <div class="team-tab" onclick="showTeamPlayers('Dumuria Warriors')">Dumuria Warriors</div>
                        <div class="team-tab" onclick="showTeamPlayers('Dumuria Titans')">Dumuria Titans</div>
                        <div class="team-tab" onclick="showTeamPlayers('Dumuria Vikings')">Dumuria Vikings</div>
                    </div>
                </div>
                <div class="result-actions">
                    <button class="btn-download-pdf" id="downloadBtn">üì• ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
                <div id="resultContainer"></div>
                <button class="close-btn" onclick="hideResultSheet()">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        let allPlayers = [];
        let currentCategory = 'A';
        let currentPlayerIndex = 0;
        let currentTeam = 'Dumuria Kings';
        let currentView = 'all';
        const teams = ["Dumuria Kings", "Dumuria Strikers", "Dumuria Warriors", "Dumuria Titans", "Dumuria Vikings"];
        
        const defaultPlayers = [
            {name:"‡¶π‡¶æ‡¶Æ‡¶ú‡¶æ ‡¶Æ‡ßã‡¶≤‡ßç‡¶≤‡¶æ",category:"A",basePrice:"150000",imageURL:"https://vip.munnacodsit.xyz/mu/HamzaMulla.jpg",auctionPrice:null,team:null},
            {name:"‡¶∂‡¶ø‡¶Ø‡¶º‡¶æ‡¶¨ ‡¶ó‡¶æ‡¶ú‡ßÄ",category:"A",basePrice:"120000",imageURL:"https://vip.munnacodsit.xyz/mu/ShiabGazi.jpg",auctionPrice:null,team:null},
            {name:"‡¶§‡¶æ‡¶Æ‡¶ø‡¶Æ ‡¶á‡¶ï‡¶¨‡¶æ‡¶≤",category:"A",basePrice:"100000",imageURL:"",auctionPrice:null,team:null},
            {name:"‡¶Æ‡¶æ‡¶∂‡¶∞‡¶æ‡¶´‡¶ø ‡¶¨‡¶ø‡¶® ‡¶Æ‡¶∞‡ßç‡¶§‡ßÅ‡¶ú‡¶æ",category:"A",basePrice:"150000",imageURL:"",auctionPrice:null,team:null},
            {name:"‡¶≤‡¶ø‡¶ü‡¶® ‡¶¶‡¶æ‡¶∏",category:"A",basePrice:"120000",imageURL:"",auctionPrice:null,team:null},
            {name:"‡¶Æ‡ßã‡¶É ‡¶Æ‡ßã‡¶¨‡¶æ‡¶∞‡¶ï ‡¶π‡ßã‡¶∏‡ßá‡¶® ‡¶Æ‡ßÅ‡¶®‡ßç‡¶®‡¶æ",category:"B",basePrice:"80000",imageURL:"https://vip.munnacodsit.xyz/mu/MUNNAPRO.jpg",auctionPrice:null,team:null},
            {name:"‡¶Æ‡ßã‡¶É ‡¶ú‡¶ø‡¶π‡¶æ‡¶¶",category:"B",basePrice:"70000",imageURL:"https://vip.munnacodsit.xyz/mu/MdJihad.jpg",auctionPrice:null,team:null},
            {name:"‡¶Æ‡ßÅ‡¶∏‡ßç‡¶§‡¶æ‡¶´‡¶ø‡¶ú‡ßÅ‡¶∞ ‡¶∞‡¶π‡¶Æ‡¶æ‡¶®",category:"B",basePrice:"60000",imageURL:"",auctionPrice:null,team:null},
            {name:"‡¶∂‡¶∞‡¶ø‡¶´‡ßÅ‡¶≤ ‡¶á‡¶∏‡¶≤‡¶æ‡¶Æ",category:"C",basePrice:"50000",imageURL:"",auctionPrice:null,team:null},
            {name:"‡¶Ü‡¶´‡¶ø‡¶´ ‡¶π‡ßã‡¶∏‡ßá‡¶®",category:"C",basePrice:"40000",imageURL:"",auctionPrice:null,team:null},
            {name:"‡¶®‡¶æ‡¶∏‡ßÅ‡¶Æ ‡¶Ü‡¶π‡¶Æ‡ßá‡¶¶",category:"C",basePrice:"30000",imageURL:"",auctionPrice:null,team:null},
            {name:"‡¶∏‡¶æ‡¶ï‡¶ø‡¶¨ ‡¶Ü‡¶≤ ‡¶π‡¶æ‡¶∏‡¶æ‡¶®",category:"ICON",basePrice:"200000",imageURL:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Shakib_Al_Hasan_%28crop%29.jpg/800px-Shakib_Al_Hasan_%28crop%29.jpg",auctionPrice:null,team:null},
            {name:"‡¶Æ‡ßÅ‡¶∂‡¶´‡¶ø‡¶ï‡ßÅ‡¶∞ ‡¶∞‡¶π‡¶ø‡¶Æ",category:"ICON",basePrice:"180000",imageURL:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Mushfiqur_Rahim_2018_%28cropped%29.jpg/800px-Mushfiqur_Rahim_2018_%28cropped%29.jpg",auctionPrice:null,team:null},
            {name:"‡¶Æ‡¶æ‡¶π‡¶Æ‡ßÅ‡¶¶‡¶â‡¶≤‡ßç‡¶≤‡¶æ‡¶π ‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶¶",category:"ICON",basePrice:"150000",imageURL:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Mahmudullah_Riyad_in_2018.jpg/800px-Mahmudullah_Riyad_in_2018.jpg",auctionPrice:null,team:null},
            {name:"‡¶§‡¶æ‡¶∏‡¶ï‡¶ø‡¶® ‡¶Ü‡¶π‡¶Æ‡ßá‡¶¶",category:"ICON",basePrice:"150000",imageURL:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/Taskin_Ahmed_%28cropped%29.jpg/800px-Taskin_Ahmed_%28cropped%29.jpg",auctionPrice:null,team:null}
        ];

        function init() {
            loadFromStorage();
            displayCurrentPlayer();
        }

        function loadFromStorage() {
            const stored = localStorage.getItem('cricketPlayers');
            if (stored) {
                const parsed = JSON.parse(stored);
                const hasIcon = parsed.some(p => p.category === 'ICON');
                allPlayers = hasIcon ? parsed : JSON.parse(JSON.stringify(defaultPlayers));
            } else {
                allPlayers = JSON.parse(JSON.stringify(defaultPlayers));
            }
            saveToStorage();
        }

        function saveToStorage() {
            localStorage.setItem('cricketPlayers', JSON.stringify(allPlayers));
        }

        function getCurrentCategoryPlayers() {
            return allPlayers.filter(p => p.category === currentCategory);
        }

        function changeCategory(cat) {
            currentCategory = cat;
            currentPlayerIndex = 0;
            document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.category-tab.${cat.toLowerCase()}`).classList.add('active');
            displayCurrentPlayer();
        }

        function displayCurrentPlayer() {
            const screen = document.getElementById('playerScreen');
            const players = getCurrentCategoryPlayers();
            if (players.length === 0) {
                screen.innerHTML = '<div class="no-players">‡¶è‡¶á ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø‡¶§‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶ñ‡ßá‡¶≤‡ßã‡¶Ø‡¶º‡¶æ‡¶°‡¶º ‡¶®‡ßá‡¶á‡•§</div>';
                return;
            }
            const p = players[currentPlayerIndex];
            const badge = `badge-${p.category.toLowerCase()}`;
            let teamSel = '';
            if (!p.auctionPrice) {
                teamSel = '<div class="team-selector">' + teams.map(t => 
                    `<button class="team-btn ${p.team === t ? 'selected' : ''}" onclick="selectTeam('${t}')">${t}</button>`
                ).join('') + '</div>';
            }
            const priceHTML = p.auctionPrice ? 
                `<div class="price-info-box"><div class="base-price-display">üí∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ${p.basePrice}</div><div class="sold-price-display">‚úÖ ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶§ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ${p.auctionPrice}</div>${p.team ? `<div class="base-price-display" style="color:#9333ea;margin-top:10px;">üèÜ ‡¶ü‡¶ø‡¶Æ: ${p.team}</div>` : ''}</div>` :
                `<div class="price-info-box"><div class="base-price-display">üí∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø: ${p.basePrice}</div><div class="sold-price-display" style="color:#ea580c;">‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡¶®‡¶ø</div></div>`;
            const imgHTML = p.imageURL ? 
                `<img src="${p.imageURL}" alt="${p.name}" class="player-image-large">` :
                `<div class="player-image-large" style="background:#f3f4f6;border:8px solid #9ca3af;display:flex;align-items:center;justify-content:center;font-size:1.5em;color:#6b7280;">‡¶õ‡¶¨‡¶ø ‡¶®‡ßá‡¶á</div>`;
            screen.innerHTML = `${imgHTML}<div class="player-name-large">${p.name}</div><div class="player-category-badge ${badge}">${p.category} ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</div>${priceHTML}${teamSel}<div class="navigation-buttons"><button class="nav-btn" onclick="previousPlayer()" ${currentPlayerIndex === 0 ? 'disabled' : ''}>‚¨ÖÔ∏è ‡¶Ü‡¶ó‡ßá‡¶∞</button><button class="nav-btn" onclick="nextPlayer()" ${currentPlayerIndex === players.length - 1 ? 'disabled' : ''}>‡¶™‡¶∞‡ßá‡¶∞ ‚û°Ô∏è</button></div><div class="player-counter">${currentPlayerIndex + 1} / ${players.length}</div>`;
        }

        function nextPlayer() {
            const players = getCurrentCategoryPlayers();
            if (currentPlayerIndex < players.length - 1) {
                currentPlayerIndex++;
                displayCurrentPlayer();
            }
        }

        function previousPlayer() {
            if (currentPlayerIndex > 0) {
                currentPlayerIndex--;
                displayCurrentPlayer();
            }
        }

        function selectTeam(teamName) {
            const players = getCurrentCategoryPlayers();
            const p = players[currentPlayerIndex];
            const idx = allPlayers.findIndex(x => x.name === p.name && x.category === p.category);
            if (idx !== -1) {
                allPlayers[idx].team = allPlayers[idx].team === teamName ? null : teamName;
                saveToStorage();
                displayCurrentPlayer();
            }
        }

        function setAuctionPrice() {
            const players = getCurrentCategoryPlayers();
            if (players.length === 0) {alert('‚ö†Ô∏è ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶≤‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶®‡ßá‡¶á!');return;}
            const input = document.getElementById('auctionPriceInput');
            const price = input.value.trim();
            if (!price || isNaN(price) || parseInt(price) <= 0) {alert('‚ö†Ô∏è ‡¶∏‡¶†‡¶ø‡¶ï ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!');return;}
            const p = players[currentPlayerIndex];
            if (!p.team) {alert('‚ö†Ô∏è ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ü‡¶ø‡¶Æ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!');return;}
            const idx = allPlayers.findIndex(x => x.name === p.name && x.category === p.category);
            if (idx !== -1) {
                allPlayers[idx].auctionPrice = price;
                saveToStorage();
                displayCurrentPlayer();
                input.value = '';
                alert(`‚úÖ ${p.name}-‡¶è‡¶∞ ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶§ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø ${price} ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!`);
            }
        }

        function showResultSheet() {
            currentView = 'all';
            document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active-view'));
            document.querySelectorAll('.view-tab')[0].classList.add('active-view');
            document.getElementById('teamTabsContainer').style.display = 'none';
            showAllResult();
            document.getElementById('resultSheetOverlay').style.display = 'flex';
        }

        function changeView(type) {
            currentView = type;
            document.querySelectorAll('.view-tab').forEach(t => t.classList.remove('active-view'));
            event.target.classList.add('active-view');
            if (type === 'all') {
                document.getElementById('teamTabsContainer').style.display = 'none';
                showAllResult();
            } else {
                document.getElementById('teamTabsContainer').style.display = 'block';
                document.querySelectorAll('.team-tab').forEach(t => t.classList.remove('active-team'));
                document.querySelectorAll('.team-tab')[0].classList.add('active-team');
                currentTeam = 'Dumuria Kings';
                showTeamPlayers('Dumuria Kings');
            }
        }

        function showAllResult() {
            const container = document.getElementById('resultContainer');
            let html = '<table><thead><tr><th>‡¶®‡¶æ‡¶Æ</th><th>‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</th><th>‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø</th><th>‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶§ ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø</th><th>‡¶ü‡¶ø‡¶Æ</th><th>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</th></tr></thead><tbody>';
            allPlayers.forEach(p => {
                const status = p.auctionPrice ? '‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶ø‡¶§' : '‡¶Ö‡¶¨‡¶ø‡¶ï‡ßÉ‡¶§';
                const price = p.auctionPrice || '---';
                const team = p.team || '---';
                const color = p.auctionPrice ? '#059669' : '#ea580c';
                html += `<tr><td>${p.name}</td><td>${p.category}</td><td>${p.basePrice}</td><td>${price}</td><td style="font-weight:bold;color:#9333ea;">${team}</td><td style="font-weight:bold;color:${color};">${status}</td></tr>`;
            });
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        function showTeamPlayers(teamName) {
            currentTeam = teamName;
            document.querySelectorAll('.team-tab').forEach(t => t.classList.remove('active-team'));
            event.target.classList.add('active-team');
            const container = document.getElementById('resultContainer');
            const teamPlayers = allPlayers.filter(p => p.team === teamName && p.auctionPrice);
            if (teamPlayers.length === 0) {
                container.innerHTML = '<div class="no-team-players">‡¶è‡¶á ‡¶ü‡¶ø‡¶Æ‡ßá ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶≤‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶®‡ßá‡¶á‡•§</div>';
                return;
            }
            let html = '<div class="team-players-grid">';
            teamPlayers.forEach(p => {
                const img = p.imageURL ? 
                    `<img src="${p.imageURL}" alt="${p.name}" class="player-card-image">` :
                    `<div class="player-card-image" style="background:#f3f4f6;display:flex;align-items:center;justify-content:center;color:#6b7280;">‡¶õ‡¶¨‡¶ø ‡¶®‡ßá‡¶á</div>`;
                html += `<div class="player-card">${img}<div class="player-card-name">${p.name}</div><div class="player-card-price">üí∞ ${p.auctionPrice} ‡¶ü‡¶æ‡¶ï‡¶æ</div></div>`;
            });
            html += '</div>';
            container.innerHTML = html;
        }

        function hideResultSheet(event) {
            if (event && event.target.id !== 'resultSheetOverlay') return;
            document.getElementById('resultSheetOverlay').style.display = 'none';
        }

        function resetData() {
            if (confirm("‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶≤‡ßá‡¶Ø‡¶º‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
                localStorage.removeItem('cricketPlayers');
                allPlayers = JSON.parse(JSON.stringify(defaultPlayers));
                saveToStorage();
                displayCurrentPlayer();
                alert("‚úÖ ‡¶∏‡¶ï‡¶≤ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§");
            }
        }

        window.onload = init;
    </script>
</body>
</html>
